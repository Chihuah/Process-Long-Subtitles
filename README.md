# Process-Long-Subtitles

## 簡介
本工具用於處理由影片字幕AI生成工具(Rask AI)生成的過長字幕。該工具有時產生的字幕檔裡，會有某行字幕文字過多的狀況。當字幕文字過長時，本程式會自動將其拆分成數行較短的字幕，並根據原始字幕的時長平均分配每行的顯示時間，從而生成更為美觀且易讀的 SRT 字幕檔。

## 功能
- **自動拆行**：檢測字幕中每行的長度，若超過指定長度（預設 70 字元），自動拆分成多行。
- **時間平分**：對拆分後的多行字幕，根據原始字幕的總時長均勻分配每行的開始與結束時間，確保時序連貫。
- **SRT 檔生成**：處理後的字幕會寫入新的 SRT 檔，方便後續應用。

## 安裝
1. 請先確保已安裝 [Python](https://www.python.org/)。
2. 安裝所需套件：
   ```bash
   pip install pysrt
   ```
3. 下載或克隆此專案：
   ```bash
   git clone https://github.com/Chihuah/Process-Long-Subtitles.git
   ```

## 使用方法
1. 將原始的 SRT 字幕檔放到專案資料夾中，並確認檔名正確。
2. 修改 `process_file` 函數中的輸入檔與輸出檔名稱，或直接使用範例中的設定：
   ```python
   process_file('原始字幕檔.srt', '處理後字幕檔.srt', max_length=70)
   ```
3. 執行程式：
   ```bash
   python your_script.py
   ```
   執行後，程式會讀取原始 SRT 檔，處理字幕文字與時間，並生成新的 SRT 檔。

## 工作原理
- **文字拆分**：對每個字幕項目，先根據換行符拆分原有文字；若某一行超過設定的最大長度，則使用 `textwrap.wrap` 將其拆分成多行。
- **時間重計算**：若字幕被拆分成多行，則根據原始字幕的持續時間，平均分配各行的開始與結束時間，確保整體時間軌不變。

### 範例
> **原始字幕**  
> ```
> 1
> 00:00:10,000 --> 00:00:20,000
> 這是一個非常長的字幕，需要被拆分成多個較短的部分以便更好地顯示在螢幕上。
> ```
> **拆分後字幕**  
> ```
> 1
> 00:00:10,000 --> 00:00:13,333
> 這是一個非常長的字幕，
>
> 2
> 00:00:13,333 --> 00:00:16,667
> 需要被拆分成多個較短的部分
>
> 3
> 00:00:16,667 --> 00:00:20,000
> 以便更好地顯示在螢幕上。
> ```

## 貢獻
歡迎各位提出 Issue 或提交 Pull Request 改進程式碼。如果你有任何建議或發現問題，請不吝回報，我們非常樂意與社群共同進步。

## 授權
本專案採用 MIT License 授權，詳細內容請參閱 [LICENSE](LICENSE) 檔案。

## 聯絡方式
如有任何疑問或建議，請在 GitHub 上發 Issue 與我聯絡。
